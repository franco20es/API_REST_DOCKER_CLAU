{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from 'react';\nimport axios from 'axios';\nexport const useEmpresas = () => {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Buscar empresa por RUC (SUNAT)\n  const buscarEmpresaPorRUC = async ruc => {\n    if (!ruc || ruc.length !== 11) {\n      throw new Error('RUC debe tener 11 dígitos');\n    }\n    setLoading(true);\n    setError(null);\n    try {\n      // ✅ API de RUC completa - endpoint correcto para empresas\n      const token = 'cGVydWRldnMucHJvZHVjdGlvbi5maXRjb2RlcnMuNjhmMTkzNTcyZGZhMTIyNjA3ZTgzZTk5';\n      const url = `https://api.perudevs.com/api/v1/ruc/complete?document=${ruc}&key=${token}`;\n      const response = await axios.get(url, {\n        timeout: 10000 // 10 segundos de timeout\n      });\n      const data = response.data;\n      setLoading(false);\n\n      // Verificar si se encontró la empresa\n      if (data && data.estado && data.mensaje === \"Encontrado\" && data.resultado) {\n        const resultado = data.resultado;\n        return {\n          ruc: resultado.ruc || ruc,\n          razonSocial: resultado.razon_social || resultado.nombre || resultado.nombre_comercial || 'No disponible',\n          direccion: resultado.direccion || resultado.direccion_completa || '-',\n          estado: resultado.estado || resultado.estado_contribuyente || 'ACTIVO',\n          condicion: resultado.condicion || resultado.condicion_domicilio || 'HABIDO',\n          departamento: resultado.departamento || '-',\n          provincia: resultado.provincia || '-',\n          distrito: resultado.distrito || '-',\n          ubigeo: resultado.ubigeo || '-'\n        };\n      } else {\n        setError('No se encontraron datos de la empresa en SUNAT');\n        return null;\n      }\n    } catch (err) {\n      setLoading(false);\n      if (err.code === 'ECONNABORTED') {\n        setError('Tiempo de espera agotado. Verifique su conexión a internet');\n      } else if (err.response) {\n        var _err$response$data;\n        // Error de respuesta del servidor\n        setError(`Error del servidor: ${err.response.status} - ${((_err$response$data = err.response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.mensaje) || 'Error desconocido'}`);\n      } else if (err.request) {\n        // No se recibió respuesta\n        setError('No se pudo conectar con el servidor. Verifique su conexión a internet');\n      } else {\n        setError(`Error: ${err.message}`);\n      }\n      throw err;\n    }\n  };\n  return {\n    loading,\n    error,\n    buscarEmpresaPorRUC\n  };\n};\n_s(useEmpresas, \"Iz3ozxQ+abMaAIcGIvU8cKUcBeo=\");","map":{"version":3,"names":["useState","axios","useEmpresas","_s","loading","setLoading","error","setError","buscarEmpresaPorRUC","ruc","length","Error","token","url","response","get","timeout","data","estado","mensaje","resultado","razonSocial","razon_social","nombre","nombre_comercial","direccion","direccion_completa","estado_contribuyente","condicion","condicion_domicilio","departamento","provincia","distrito","ubigeo","err","code","_err$response$data","status","request","message"],"sources":["C:/Users/user/Desktop/PROYECTO-DE-JS-PARCTICA-3/sistema-facturacion/src/hooks/useEmpresas.js"],"sourcesContent":["import { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport const useEmpresas = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Buscar empresa por RUC (SUNAT)\r\n  const buscarEmpresaPorRUC = async (ruc) => {\r\n    if (!ruc || ruc.length !== 11) {\r\n      throw new Error('RUC debe tener 11 dígitos');\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      // ✅ API de RUC completa - endpoint correcto para empresas\r\n      const token = 'cGVydWRldnMucHJvZHVjdGlvbi5maXRjb2RlcnMuNjhmMTkzNTcyZGZhMTIyNjA3ZTgzZTk5';\r\n      const url = `https://api.perudevs.com/api/v1/ruc/complete?document=${ruc}&key=${token}`;\r\n      \r\n      const response = await axios.get(url, {\r\n        timeout: 10000 // 10 segundos de timeout\r\n      });\r\n      \r\n      const data = response.data;\r\n      \r\n      setLoading(false);\r\n      \r\n      // Verificar si se encontró la empresa\r\n      if (data && data.estado && data.mensaje === \"Encontrado\" && data.resultado) {\r\n        const resultado = data.resultado;\r\n        \r\n        return {\r\n          ruc: resultado.ruc || ruc,\r\n          razonSocial: resultado.razon_social || resultado.nombre || resultado.nombre_comercial || 'No disponible',\r\n          direccion: resultado.direccion || resultado.direccion_completa || '-',\r\n          estado: resultado.estado || resultado.estado_contribuyente || 'ACTIVO',\r\n          condicion: resultado.condicion || resultado.condicion_domicilio || 'HABIDO',\r\n          departamento: resultado.departamento || '-',\r\n          provincia: resultado.provincia || '-',\r\n          distrito: resultado.distrito || '-',\r\n          ubigeo: resultado.ubigeo || '-'\r\n        };\r\n      } else {\r\n        setError('No se encontraron datos de la empresa en SUNAT');\r\n        return null;\r\n      }\r\n    } catch (err) {\r\n      setLoading(false);\r\n      \r\n      if (err.code === 'ECONNABORTED') {\r\n        setError('Tiempo de espera agotado. Verifique su conexión a internet');\r\n      } else if (err.response) {\r\n        // Error de respuesta del servidor\r\n        setError(`Error del servidor: ${err.response.status} - ${err.response.data?.mensaje || 'Error desconocido'}`);\r\n      } else if (err.request) {\r\n        // No se recibió respuesta\r\n        setError('No se pudo conectar con el servidor. Verifique su conexión a internet');\r\n      } else {\r\n        setError(`Error: ${err.message}`);\r\n      }\r\n      \r\n      throw err;\r\n    }\r\n  };\r\n\r\n  return {\r\n    loading,\r\n    error,\r\n    buscarEmpresaPorRUC\r\n  };\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}