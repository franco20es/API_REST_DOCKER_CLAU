{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from 'react';\nimport axios from 'axios';\n\n// Usa variable de entorno: localhost:8080 en dev, /api en producción\nconst BACKEND_URL = `${process.env.REACT_APP_BACKEND_URL || ''}/api/clientes`;\nexport const useClientes = () => {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const buscarClientePorDNI = async dni => {\n    if (!dni || dni.length !== 8) {\n      throw new Error('DNI debe tener 8 dígitos');\n    }\n    setLoading(true);\n    setError(null);\n    try {\n      // API de RENIEC (usando PeruDevs)\n      const token = 'cGVydWRldnMucHJvZHVjdGlvbi5maXRjb2RlcnMuNjhmMTkzNTcyZGZhMTIyNjA3ZTgzZTk5';\n      const url = `https://api.perudevs.com/api/v1/dni/simple?document=${dni}&key=${token}`;\n      const response = await axios.get(url);\n      const data = response.data.resultado || response.data.data || response.data;\n      setLoading(false);\n      return {\n        dni: data.numero || dni,\n        nombres: data.nombres,\n        apellidoPaterno: data.apellido_paterno || data.apellidoPaterno,\n        apellidoMaterno: data.apellido_materno || data.apellidoMaterno,\n        nombreCompleto: `${data.nombres} ${data.apellido_paterno || data.apellidoPaterno} ${data.apellido_materno || data.apellidoMaterno}`\n      };\n    } catch (err) {\n      setLoading(false);\n      setError('No se pudo consultar el DNI');\n      throw err;\n    }\n  };\n\n  // ← ESTA FUNCIÓN FALTA\n  const guardarClienteEnBackend = async clienteData => {\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await axios.post(BACKEND_URL, {\n        dni: clienteData.dni,\n        nombre_completo: clienteData.nombreCompleto,\n        apellido_paterno: clienteData.apellidoPaterno,\n        apellido_materno: clienteData.apellidoMaterno\n      });\n      setLoading(false);\n      return response.data;\n    } catch (err) {\n      setLoading(false);\n      setError('Error al guardar cliente en la base de datos');\n      console.error('Error guardando cliente:', err);\n      throw err;\n    }\n  };\n\n  // ← ESTA FUNCIÓN FALTA\n  const obtenerClientesRegistrados = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await axios.get(BACKEND_URL);\n      setLoading(false);\n      return response.data;\n    } catch (err) {\n      setLoading(false);\n      setError('Error al obtener clientes');\n      throw err;\n    }\n  };\n\n  // ← ESTA FUNCIÓN FALTA (la que causa el error)\n  const buscarClienteEnBackend = async dni => {\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await axios.get(`${BACKEND_URL}/buscar/dni/${dni}`);\n      setLoading(false);\n      return response.data;\n    } catch (err) {\n      setLoading(false);\n      // No es error si no se encuentra, retorna null\n      return null;\n    }\n  };\n  const buscarEmpresaPorRUC = async ruc => {\n    if (!ruc || ruc.length !== 11) {\n      throw new Error('RUC debe tener 11 dígitos');\n    }\n    setLoading(true);\n    setError(null);\n    try {\n      // API de SUNAT (usando PeruDevs)\n      const token = 'cGVydWRldnMucHJvZHVjdGlvbi5maXRjb2RlcnMuNjhmMTkzNTcyZGZhMTIyNjA3ZTgzZTk5';\n      const url = `https://api.perudevs.com/api/v1/ruc/simple?document=${ruc}&key=${token}`;\n      const response = await axios.get(url);\n      const data = response.data.resultado || response.data.data || response.data;\n      setLoading(false);\n      return {\n        ruc: data.ruc || ruc,\n        razonSocial: data.razon_social || data.razonSocial || data.nombre_o_razon_social,\n        direccion: data.direccion || data.direccion_completa,\n        estado: data.estado || data.estado_contribuyente,\n        condicion: data.condicion || data.condicion_domicilio\n      };\n    } catch (err) {\n      setLoading(false);\n      setError('No se pudo consultar el RUC');\n      throw err;\n    }\n  };\n\n  // ← IMPORTANTE: Retornar todas las funciones\n  return {\n    loading,\n    error,\n    buscarClientePorDNI,\n    guardarClienteEnBackend,\n    // ← Agregar\n    obtenerClientesRegistrados,\n    // ← Agregar\n    buscarClienteEnBackend,\n    // ← Agregar (la que falta)\n    buscarEmpresaPorRUC\n  };\n};\n_s(useClientes, \"Iz3ozxQ+abMaAIcGIvU8cKUcBeo=\");","map":{"version":3,"names":["useState","axios","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","useClientes","_s","loading","setLoading","error","setError","buscarClientePorDNI","dni","length","Error","token","url","response","get","data","resultado","numero","nombres","apellidoPaterno","apellido_paterno","apellidoMaterno","apellido_materno","nombreCompleto","err","guardarClienteEnBackend","clienteData","post","nombre_completo","console","obtenerClientesRegistrados","buscarClienteEnBackend","buscarEmpresaPorRUC","ruc","razonSocial","razon_social","nombre_o_razon_social","direccion","direccion_completa","estado","estado_contribuyente","condicion","condicion_domicilio"],"sources":["C:/Users/user/Desktop/PROYECTO-DE-JS-PARCTICA-3/sistema-facturacion/src/hooks/useClientes.js"],"sourcesContent":["import { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\n// Usa variable de entorno: localhost:8080 en dev, /api en producción\r\nconst BACKEND_URL = `${process.env.REACT_APP_BACKEND_URL || ''}/api/clientes`;\r\n\r\nexport const useClientes = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const buscarClientePorDNI = async (dni) => {\r\n    if (!dni || dni.length !== 8) {\r\n      throw new Error('DNI debe tener 8 dígitos');\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      // API de RENIEC (usando PeruDevs)\r\n      const token = 'cGVydWRldnMucHJvZHVjdGlvbi5maXRjb2RlcnMuNjhmMTkzNTcyZGZhMTIyNjA3ZTgzZTk5';\r\n      const url = `https://api.perudevs.com/api/v1/dni/simple?document=${dni}&key=${token}`;\r\n      \r\n      const response = await axios.get(url);\r\n      const data = response.data.resultado || response.data.data || response.data;\r\n      \r\n      setLoading(false);\r\n      \r\n      return {\r\n        dni: data.numero || dni,\r\n        nombres: data.nombres,\r\n        apellidoPaterno: data.apellido_paterno || data.apellidoPaterno,\r\n        apellidoMaterno: data.apellido_materno || data.apellidoMaterno,\r\n        nombreCompleto: `${data.nombres} ${data.apellido_paterno || data.apellidoPaterno} ${data.apellido_materno || data.apellidoMaterno}`\r\n      };\r\n    } catch (err) {\r\n      setLoading(false);\r\n      setError('No se pudo consultar el DNI');\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  // ← ESTA FUNCIÓN FALTA\r\n  const guardarClienteEnBackend = async (clienteData) => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await axios.post(BACKEND_URL, {\r\n        dni: clienteData.dni,\r\n        nombre_completo: clienteData.nombreCompleto,\r\n        apellido_paterno: clienteData.apellidoPaterno,\r\n        apellido_materno: clienteData.apellidoMaterno\r\n      });\r\n      \r\n      setLoading(false);\r\n      return response.data;\r\n    } catch (err) {\r\n      setLoading(false);\r\n      setError('Error al guardar cliente en la base de datos');\r\n      console.error('Error guardando cliente:', err);\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  // ← ESTA FUNCIÓN FALTA\r\n  const obtenerClientesRegistrados = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await axios.get(BACKEND_URL);\r\n      setLoading(false);\r\n      return response.data;\r\n    } catch (err) {\r\n      setLoading(false);\r\n      setError('Error al obtener clientes');\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  // ← ESTA FUNCIÓN FALTA (la que causa el error)\r\n  const buscarClienteEnBackend = async (dni) => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await axios.get(`${BACKEND_URL}/buscar/dni/${dni}`);\r\n      setLoading(false);\r\n      return response.data;\r\n    } catch (err) {\r\n      setLoading(false);\r\n      // No es error si no se encuentra, retorna null\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const buscarEmpresaPorRUC = async (ruc) => {\r\n    if (!ruc || ruc.length !== 11) {\r\n      throw new Error('RUC debe tener 11 dígitos');\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      // API de SUNAT (usando PeruDevs)\r\n      const token = 'cGVydWRldnMucHJvZHVjdGlvbi5maXRjb2RlcnMuNjhmMTkzNTcyZGZhMTIyNjA3ZTgzZTk5';\r\n      const url = `https://api.perudevs.com/api/v1/ruc/simple?document=${ruc}&key=${token}`;\r\n      \r\n      const response = await axios.get(url);\r\n      const data = response.data.resultado || response.data.data || response.data;\r\n      \r\n      setLoading(false);\r\n      \r\n      return {\r\n        ruc: data.ruc || ruc,\r\n        razonSocial: data.razon_social || data.razonSocial || data.nombre_o_razon_social,\r\n        direccion: data.direccion || data.direccion_completa,\r\n        estado: data.estado || data.estado_contribuyente,\r\n        condicion: data.condicion || data.condicion_domicilio\r\n      };\r\n    } catch (err) {\r\n      setLoading(false);\r\n      setError('No se pudo consultar el RUC');\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  // ← IMPORTANTE: Retornar todas las funciones\r\n  return {\r\n    loading,\r\n    error,\r\n    buscarClientePorDNI,\r\n    guardarClienteEnBackend,           // ← Agregar\r\n    obtenerClientesRegistrados,        // ← Agregar\r\n    buscarClienteEnBackend,            // ← Agregar (la que falta)\r\n    buscarEmpresaPorRUC\r\n  };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}