{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from 'react';\nimport axios from 'axios';\nexport const useEmpresas = () => {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Buscar empresa por RUC (SUNAT)\n  const buscarEmpresaPorRUC = async ruc => {\n    if (!ruc || ruc.length !== 11) {\n      throw new Error('RUC debe tener 11 dígitos');\n    }\n    setLoading(true);\n    setError(null);\n    try {\n      // ✅ Endpoint correcto según documentación oficial\n      const token = 'cGVydWRldnMucHJvZHVjdGlvbi5maXRjb2RlcnMuNjhmMTkzNTcyZGZhMTIyNjA3ZTgzZTk5';\n      const url = `https://api.perudevs.com/api/v1/ruc?document=${ruc}&key=${token}`;\n      const response = await axios.get(url, {\n        timeout: 10000 // 10 segundos de timeout\n      });\n      const data = response.data;\n      setLoading(false);\n\n      // Verificar si se encontró la empresa\n      if (data && data.estado && data.mensaje === \"Encontrado\" && data.resultado) {\n        const resultado = data.resultado;\n        return {\n          ruc: resultado.oficio || ruc,\n          // \"oficio\" contiene el RUC según la doc\n          razonSocial: resultado.razon_social || resultado.nombre_comercial || 'No disponible',\n          direccion: resultado.direccion || '-',\n          estado: resultado.estado || 'ACTIVO',\n          condicion: resultado.condicion || 'HABIDO',\n          tipo: resultado.tipo || '-',\n          nombreComercial: resultado.nombre_comercial || '-',\n          fechaInscripcion: resultado.fecha_inscripcion || '-',\n          sistemaEmision: resultado.sistema_emision || '-',\n          actividadExterior: resultado.actividad_exterior || '-',\n          sistemaContabilidad: resultado.sistema_contabilidad || '-',\n          fechaEmisionElectronica: resultado.fecha_emision_electronica || '-',\n          fechaPle: resultado.fecha_ple || '-',\n          actividadesEconomicas: resultado.actividades_economicas || [],\n          // Campos adicionales que podríamos necesitar\n          departamento: '-',\n          // La API no retorna estos campos\n          provincia: '-',\n          distrito: '-',\n          ubigeo: '-'\n        };\n      } else {\n        setError('No se encontraron datos de la empresa en SUNAT');\n        return null;\n      }\n    } catch (err) {\n      setLoading(false);\n      if (err.code === 'ECONNABORTED') {\n        setError('Tiempo de espera agotado. Verifique su conexión a internet');\n      } else if (err.response) {\n        var _err$response$data;\n        // Error de respuesta del servidor\n        setError(`Error del servidor: ${err.response.status} - ${((_err$response$data = err.response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.mensaje) || 'Error desconocido'}`);\n      } else if (err.request) {\n        // No se recibió respuesta\n        setError('No se pudo conectar con el servidor. Verifique su conexión a internet');\n      } else {\n        setError(`Error: ${err.message}`);\n      }\n      throw err;\n    }\n  };\n  return {\n    loading,\n    error,\n    buscarEmpresaPorRUC\n  };\n};\n_s(useEmpresas, \"Iz3ozxQ+abMaAIcGIvU8cKUcBeo=\");","map":{"version":3,"names":["useState","axios","useEmpresas","_s","loading","setLoading","error","setError","buscarEmpresaPorRUC","ruc","length","Error","token","url","response","get","timeout","data","estado","mensaje","resultado","oficio","razonSocial","razon_social","nombre_comercial","direccion","condicion","tipo","nombreComercial","fechaInscripcion","fecha_inscripcion","sistemaEmision","sistema_emision","actividadExterior","actividad_exterior","sistemaContabilidad","sistema_contabilidad","fechaEmisionElectronica","fecha_emision_electronica","fechaPle","fecha_ple","actividadesEconomicas","actividades_economicas","departamento","provincia","distrito","ubigeo","err","code","_err$response$data","status","request","message"],"sources":["C:/Users/user/Desktop/PROYECTO-DE-JS-PARCTICA-3/sistema-facturacion/src/hooks/useEmpresas.js"],"sourcesContent":["import { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport const useEmpresas = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Buscar empresa por RUC (SUNAT)\r\n  const buscarEmpresaPorRUC = async (ruc) => {\r\n    if (!ruc || ruc.length !== 11) {\r\n      throw new Error('RUC debe tener 11 dígitos');\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      // ✅ Endpoint correcto según documentación oficial\r\n      const token = 'cGVydWRldnMucHJvZHVjdGlvbi5maXRjb2RlcnMuNjhmMTkzNTcyZGZhMTIyNjA3ZTgzZTk5';\r\n      const url = `https://api.perudevs.com/api/v1/ruc?document=${ruc}&key=${token}`;\r\n      \r\n      const response = await axios.get(url, {\r\n        timeout: 10000 // 10 segundos de timeout\r\n      });\r\n      \r\n      const data = response.data;\r\n      \r\n      setLoading(false);\r\n      \r\n      // Verificar si se encontró la empresa\r\n      if (data && data.estado && data.mensaje === \"Encontrado\" && data.resultado) {\r\n        const resultado = data.resultado;\r\n        \r\n        return {\r\n          ruc: resultado.oficio || ruc, // \"oficio\" contiene el RUC según la doc\r\n          razonSocial: resultado.razon_social || resultado.nombre_comercial || 'No disponible',\r\n          direccion: resultado.direccion || '-',\r\n          estado: resultado.estado || 'ACTIVO',\r\n          condicion: resultado.condicion || 'HABIDO',\r\n          tipo: resultado.tipo || '-',\r\n          nombreComercial: resultado.nombre_comercial || '-',\r\n          fechaInscripcion: resultado.fecha_inscripcion || '-',\r\n          sistemaEmision: resultado.sistema_emision || '-',\r\n          actividadExterior: resultado.actividad_exterior || '-',\r\n          sistemaContabilidad: resultado.sistema_contabilidad || '-',\r\n          fechaEmisionElectronica: resultado.fecha_emision_electronica || '-',\r\n          fechaPle: resultado.fecha_ple || '-',\r\n          actividadesEconomicas: resultado.actividades_economicas || [],\r\n          // Campos adicionales que podríamos necesitar\r\n          departamento: '-', // La API no retorna estos campos\r\n          provincia: '-',\r\n          distrito: '-',\r\n          ubigeo: '-'\r\n        };\r\n      } else {\r\n        setError('No se encontraron datos de la empresa en SUNAT');\r\n        return null;\r\n      }\r\n    } catch (err) {\r\n      setLoading(false);\r\n      \r\n      if (err.code === 'ECONNABORTED') {\r\n        setError('Tiempo de espera agotado. Verifique su conexión a internet');\r\n      } else if (err.response) {\r\n        // Error de respuesta del servidor\r\n        setError(`Error del servidor: ${err.response.status} - ${err.response.data?.mensaje || 'Error desconocido'}`);\r\n      } else if (err.request) {\r\n        // No se recibió respuesta\r\n        setError('No se pudo conectar con el servidor. Verifique su conexión a internet');\r\n      } else {\r\n        setError(`Error: ${err.message}`);\r\n      }\r\n      \r\n      throw err;\r\n    }\r\n  };\r\n\r\n  return {\r\n    loading,\r\n    error,\r\n    buscarEmpresaPorRUC\r\n  };\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}