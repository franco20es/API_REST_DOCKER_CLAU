{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from 'react';\nimport axios from 'axios';\nconst BACKEND_URL = `${process.env.REACT_APP_BACKEND_URL || ''}/api/usuarios`;\nexport const useUsuarios = () => {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const guardarUsuarioEnBackend = async (usuarioData, credenciales) => {\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await axios.post(BACKEND_URL, {\n        dni: usuarioData.dni,\n        nombre_completo: usuarioData.nombreCompleto,\n        apellido_paterno: usuarioData.apellidoPaterno,\n        apellido_materno: usuarioData.apellidoMaterno,\n        usuario: credenciales.usuario,\n        password: credenciales.password,\n        rol: credenciales.rol || 'USER'\n      });\n      setLoading(false);\n      return response.data;\n    } catch (err) {\n      setLoading(false);\n      setError('Error al guardar usuario en la base de datos');\n      console.error('Error guardando usuario:', err);\n      throw err;\n    }\n  };\n  const obtenerUsuariosRegistrados = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await axios.get(BACKEND_URL);\n      setLoading(false);\n      return response.data;\n    } catch (err) {\n      setLoading(false);\n      setError('Error al obtener usuarios');\n      throw err;\n    }\n  };\n  const buscarUsuarioEnBackend = async dni => {\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await axios.get(`${BACKEND_URL}/buscar/dni/${dni}`);\n      setLoading(false);\n      return response.data;\n    } catch (err) {\n      setLoading(false);\n      return null;\n    }\n  };\n  const loginUsuario = async (usuario, password) => {\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await axios.post(`${BACKEND_URL}/login`, {\n        usuario,\n        password\n      });\n      setLoading(false);\n      return response.data;\n    } catch (err) {\n      setLoading(false);\n      setError('Credenciales incorrectas');\n      throw err;\n    }\n  };\n  return {\n    loading,\n    error,\n    guardarUsuarioEnBackend,\n    obtenerUsuariosRegistrados,\n    buscarUsuarioEnBackend,\n    loginUsuario\n  };\n};\n_s(useUsuarios, \"Iz3ozxQ+abMaAIcGIvU8cKUcBeo=\");","map":{"version":3,"names":["useState","axios","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","useUsuarios","_s","loading","setLoading","error","setError","guardarUsuarioEnBackend","usuarioData","credenciales","response","post","dni","nombre_completo","nombreCompleto","apellido_paterno","apellidoPaterno","apellido_materno","apellidoMaterno","usuario","password","rol","data","err","console","obtenerUsuariosRegistrados","get","buscarUsuarioEnBackend","loginUsuario"],"sources":["C:/Users/user/Desktop/PROYECTO-DE-JS-PARCTICA-3/sistema-facturacion/src/hooks/useUsuarios.js"],"sourcesContent":["import { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst BACKEND_URL = `${process.env.REACT_APP_BACKEND_URL || ''}/api/usuarios`;\r\n\r\nexport const useUsuarios = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const guardarUsuarioEnBackend = async (usuarioData, credenciales) => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await axios.post(BACKEND_URL, {\r\n        dni: usuarioData.dni,\r\n        nombre_completo: usuarioData.nombreCompleto,\r\n        apellido_paterno: usuarioData.apellidoPaterno,\r\n        apellido_materno: usuarioData.apellidoMaterno,\r\n        usuario: credenciales.usuario,\r\n        password: credenciales.password,\r\n        rol: credenciales.rol || 'USER'\r\n      });\r\n      \r\n      setLoading(false);\r\n      return response.data;\r\n    } catch (err) {\r\n      setLoading(false);\r\n      setError('Error al guardar usuario en la base de datos');\r\n      console.error('Error guardando usuario:', err);\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  const obtenerUsuariosRegistrados = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await axios.get(BACKEND_URL);\r\n      setLoading(false);\r\n      return response.data;\r\n    } catch (err) {\r\n      setLoading(false);\r\n      setError('Error al obtener usuarios');\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  const buscarUsuarioEnBackend = async (dni) => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await axios.get(`${BACKEND_URL}/buscar/dni/${dni}`);\r\n      setLoading(false);\r\n      return response.data;\r\n    } catch (err) {\r\n      setLoading(false);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const loginUsuario = async (usuario, password) => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await axios.post(`${BACKEND_URL}/login`, {\r\n        usuario,\r\n        password\r\n      });\r\n      setLoading(false);\r\n      return response.data;\r\n    } catch (err) {\r\n      setLoading(false);\r\n      setError('Credenciales incorrectas');\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  return {\r\n    loading,\r\n    error,\r\n    guardarUsuarioEnBackend,\r\n    obtenerUsuariosRegistrados,\r\n    buscarUsuarioEnBackend,\r\n    loginUsuario\r\n  };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}