{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nexport const useTipoCambio = () => {\n  _s();\n  const [tipoCambio, setTipoCambio] = useState(3.70); // Valor por defecto\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [ultimaActualizacion, setUltimaActualizacion] = useState(null);\n  const obtenerTipoCambio = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      // Usando API gratuita de tipo de cambio\n      const response = await axios.get('https://api.exchangerate-api.com/v4/latest/USD');\n      const tasaPEN = response.data.rates.PEN;\n      setTipoCambio(tasaPEN);\n      setUltimaActualizacion(new Date());\n      setLoading(false);\n      return tasaPEN;\n    } catch (err) {\n      console.error('Error al obtener tipo de cambio:', err);\n      setError('No se pudo obtener el tipo de cambio');\n      setLoading(false);\n      return tipoCambio; // Retorna el valor actual si hay error\n    }\n  };\n  const convertirUSDtoSoles = montoUSD => {\n    return (parseFloat(montoUSD) * tipoCambio).toFixed(2);\n  };\n  const convertirSolesToUSD = montoSoles => {\n    return (parseFloat(montoSoles) / tipoCambio).toFixed(2);\n  };\n\n  // Obtener tipo de cambio al montar el componente\n  useEffect(() => {\n    obtenerTipoCambio();\n\n    // Actualizar cada 30 minutos\n    const interval = setInterval(obtenerTipoCambio, 30 * 60 * 1000);\n    return () => clearInterval(interval);\n  }, []);\n  return {\n    tipoCambio,\n    loading,\n    error,\n    ultimaActualizacion,\n    obtenerTipoCambio,\n    convertirUSDtoSoles,\n    convertirSolesToUSD\n  };\n};\n_s(useTipoCambio, \"FBt5WSfeL1MVZ0ESvg0txtvLZZ4=\");","map":{"version":3,"names":["useState","useEffect","axios","useTipoCambio","_s","tipoCambio","setTipoCambio","loading","setLoading","error","setError","ultimaActualizacion","setUltimaActualizacion","obtenerTipoCambio","response","get","tasaPEN","data","rates","PEN","Date","err","console","convertirUSDtoSoles","montoUSD","parseFloat","toFixed","convertirSolesToUSD","montoSoles","interval","setInterval","clearInterval"],"sources":["C:/Users/user/Desktop/PROYECTO-DE-JS-PARCTICA-3/sistema-facturacion/src/hooks/useTipoCambio.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport const useTipoCambio = () => {\r\n  const [tipoCambio, setTipoCambio] = useState(3.70); // Valor por defecto\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [ultimaActualizacion, setUltimaActualizacion] = useState(null);\r\n\r\n  const obtenerTipoCambio = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      // Usando API gratuita de tipo de cambio\r\n      const response = await axios.get('https://api.exchangerate-api.com/v4/latest/USD');\r\n      const tasaPEN = response.data.rates.PEN;\r\n      \r\n      setTipoCambio(tasaPEN);\r\n      setUltimaActualizacion(new Date());\r\n      setLoading(false);\r\n      \r\n      return tasaPEN;\r\n    } catch (err) {\r\n      console.error('Error al obtener tipo de cambio:', err);\r\n      setError('No se pudo obtener el tipo de cambio');\r\n      setLoading(false);\r\n      return tipoCambio; // Retorna el valor actual si hay error\r\n    }\r\n  };\r\n\r\n  const convertirUSDtoSoles = (montoUSD) => {\r\n    return (parseFloat(montoUSD) * tipoCambio).toFixed(2);\r\n  };\r\n\r\n  const convertirSolesToUSD = (montoSoles) => {\r\n    return (parseFloat(montoSoles) / tipoCambio).toFixed(2);\r\n  };\r\n\r\n  // Obtener tipo de cambio al montar el componente\r\n  useEffect(() => {\r\n    obtenerTipoCambio();\r\n    \r\n    // Actualizar cada 30 minutos\r\n    const interval = setInterval(obtenerTipoCambio, 30 * 60 * 1000);\r\n    \r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  return {\r\n    tipoCambio,\r\n    loading,\r\n    error,\r\n    ultimaActualizacion,\r\n    obtenerTipoCambio,\r\n    convertirUSDtoSoles,\r\n    convertirSolesToUSD\r\n  };\r\n};\r\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,KAAK,MAAM,OAAO;AAEzB,OAAO,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACjC,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EACpD,MAAM,CAACO,OAAO,EAAEC,UAAU,CAAC,GAAGR,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACS,KAAK,EAAEC,QAAQ,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACW,mBAAmB,EAAEC,sBAAsB,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAEpE,MAAMa,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IACpCL,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,IAAI,CAAC;IAEd,IAAI;MACF;MACA,MAAMI,QAAQ,GAAG,MAAMZ,KAAK,CAACa,GAAG,CAAC,gDAAgD,CAAC;MAClF,MAAMC,OAAO,GAAGF,QAAQ,CAACG,IAAI,CAACC,KAAK,CAACC,GAAG;MAEvCb,aAAa,CAACU,OAAO,CAAC;MACtBJ,sBAAsB,CAAC,IAAIQ,IAAI,CAAC,CAAC,CAAC;MAClCZ,UAAU,CAAC,KAAK,CAAC;MAEjB,OAAOQ,OAAO;IAChB,CAAC,CAAC,OAAOK,GAAG,EAAE;MACZC,OAAO,CAACb,KAAK,CAAC,kCAAkC,EAAEY,GAAG,CAAC;MACtDX,QAAQ,CAAC,sCAAsC,CAAC;MAChDF,UAAU,CAAC,KAAK,CAAC;MACjB,OAAOH,UAAU,CAAC,CAAC;IACrB;EACF,CAAC;EAED,MAAMkB,mBAAmB,GAAIC,QAAQ,IAAK;IACxC,OAAO,CAACC,UAAU,CAACD,QAAQ,CAAC,GAAGnB,UAAU,EAAEqB,OAAO,CAAC,CAAC,CAAC;EACvD,CAAC;EAED,MAAMC,mBAAmB,GAAIC,UAAU,IAAK;IAC1C,OAAO,CAACH,UAAU,CAACG,UAAU,CAAC,GAAGvB,UAAU,EAAEqB,OAAO,CAAC,CAAC,CAAC;EACzD,CAAC;;EAED;EACAzB,SAAS,CAAC,MAAM;IACdY,iBAAiB,CAAC,CAAC;;IAEnB;IACA,MAAMgB,QAAQ,GAAGC,WAAW,CAACjB,iBAAiB,EAAE,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC;IAE/D,OAAO,MAAMkB,aAAa,CAACF,QAAQ,CAAC;EACtC,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IACLxB,UAAU;IACVE,OAAO;IACPE,KAAK;IACLE,mBAAmB;IACnBE,iBAAiB;IACjBU,mBAAmB;IACnBI;EACF,CAAC;AACH,CAAC;AAACvB,EAAA,CAvDWD,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}